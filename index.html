<!DOCTYPE html>
<html>

<head>
    <title>Scriptor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app">
        <aside class="sidebar">
            <div class="brand">
                <i class="fas fa-cube"></i> Scriptor
            </div>

            <div class="sidebar-tools">
                <button class="btn-tool" id="exportBtn" title="Backup Rules">
                    <i class="fas fa-download"></i> Export
                </button>
                <button class="btn-tool" id="importBtn" title="Restore Rules">
                    <i class="fas fa-upload"></i> Import
                </button>
            </div>

            <div class="sidebar-section">
                <div class="nav-item" id="nav-redirects">
                    <i class="fas fa-exchange-alt"></i> Redirects
                </div>
            </div>

            <div class="sidebar-section">
                <div class="section-header">
                    <div class="section-label">My Sites</div>
                    <button class="btn-icon-small" id="addSiteBtn" title="Add New Site">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div id="siteList" class="site-list"></div>
            </div>
            
            </aside>

        <main class="main-view">
            <header class="top-bar">
                <div class="header-info">
                    <input type="text" id="viewTitleInput" class="header-input title-input" placeholder="Site Name" autocomplete="off">
                    <input type="text" id="viewSubtitleInput" class="header-input subtitle-input" placeholder="URL Pattern" autocomplete="off">
                    
                    <h1 id="redirectTitle" style="display:none;">Redirects</h1>
                    <span id="redirectSubtitle" class="subtitle" style="display:none;">Global Redirections</span>
                </div>

                <div class="site-actions" id="siteActions" style="display:none;">
                    <button class="btn btn-primary" id="addRuleBtn" disabled>
                        <i class="fas fa-plus"></i> Add Rule
                    </button>
                </div>

                <div class="redirect-actions" id="redirectActions" style="display:none;">
                    <button class="btn btn-primary" id="addRedirectBtn">
                        <i class="fas fa-plus"></i> Add Redirect
                    </button>
                </div>
            </header>

            <div id="rulesGrid" class="rules-grid">
            </div>
        </main>
    </div>

    <div id="siteModal" class="modal">
        <div class="modal-content small-modal">
            <h2 id="siteModalTitle">Add New Site</h2>
            <form id="siteForm">
                <div class="form-group">
                    <label>Site Display Name (Optional)</label>
                    <input type="text" id="siteNameInput" placeholder="e.g. Google Search Fix">
                </div>
                <div class="form-group">
                    <label>URL Pattern (e.g., google.com/*)</label>
                    <input type="text" id="sitePatternInput" required placeholder="example.com">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-ghost cancel-btn">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="siteSaveBtn">Save Site</button>
                </div>
            </form>
        </div>
    </div>

    <div id="ruleModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2 id="ruleModalTitle">Edit Rule</h2>
                <div class="view-toggles" id="editorToggles">
                    <button type="button" class="toggle-btn active" data-target="js-editor">JS</button>
                    <button type="button" class="toggle-btn active" data-target="css-editor">CSS</button>
                </div>
            </div>

            <form id="ruleForm">
                <div class="meta-row">
                    <div class="form-group flex-2">
                        <label>Rule Name</label>
                        <input type="text" id="ruleName" required placeholder="e.g. Dark Mode">
                    </div>
                    <div class="form-group flex-1" id="ruleTypeGroup">
                        <label>Type</label>
                        <select id="ruleType">
                            <option value="Auto">Auto Run</option>
                            <option value="Context">On Click (Menu)</option>
                        </select>
                    </div>
                </div>

                <div id="injectionEditors" class="editors-container">
                    <div class="editor-pane" id="js-editor">
                        <div class="pane-label"><i class="fab fa-js"></i> JavaScript</div>
                        <textarea id="jsCode" class="code-area" placeholder="console.log('Hello');"></textarea>
                    </div>
                    <div class="editor-pane" id="css-editor">
                        <div class="pane-label"><i class="fab fa-css3"></i> CSS</div>
                        <textarea id="cssCode" class="code-area" placeholder="body { background: #000; }"></textarea>
                    </div>
                </div>

                <div id="redirectInputs" style="display:none;">
                    <div class="form-group">
                        <label>From URL (Pattern)</label>
                        <input type="text" id="redirectFrom" placeholder="http://old.com/*">
                    </div>
                    <div class="form-group">
                        <label>To URL (Target)</label>
                        <input type="text" id="redirectTo" placeholder="http://new.com/$1">
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-ghost cancel-btn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Rule</button>
                </div>
            </form>
        </div>
    </div>

    <script src="index.js"></script>
</body>
</html>
